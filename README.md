# ETF业务周报生成工具

## 版本历史

### v3.4.0(2025-04-09)
- 功能优化：新增展示自选人数、持仓人数及保有规模的当日、近五日变动数据

### v3.3.3(2025-04-09)
- 关键修复：关注人数调整为自选人数，减少理解障碍

### v3.3.2(2025-04-09)
- 关键修复：修复 etf_info表缺少一部分数据的bug

### v3.3.1(2025-04-04)
- 功能优化：数据变化统计模块展示优化

### v3.3.0(2025-04-04)
- 新增功能：图表界面重新布局，左侧为图表区域，右侧新增数据变化统计模块和时间范围选择模块
- 功能优化：自选人数和持有人数的数据点上方标注具体数字
- 功能优化：标题格式改为：证券代码｜证券简称｜基金公司简称｜客户数据趋势
- 新增功能：可自定义日期，灵活控制图表显示的时间范围

### v3.2.0(2025-04-04)
- 新增功能：搜索证券代码时，展示每日加自选人数、每日持仓人数以及持仓金额的时序图

### v3.1.0(2025-04-04)
- 功能升级：数据库实现存储历史数据功能

### v3.0.5(2025-04-03)
- 关键修复：多指数Markdown功能恢复

### v3.0.4(2025-04-03)
- 功能优化：优化选品的高亮展示逻辑

### v3.0.3(2025-04-03)
- 关键修复：数据库bug修复

### v3.0.2(2025-04-03)
- 关键修复：数据表格恢复 80%，单品Markdown功能恢复

### v3.0.1(2025-04-03)
- 关键修复：搜索后可以关联到数据库

### v3.0.0(2025-04-02)
- 新增功能：数据上传数据库（ETF基本信息：1113条记录、ETF市场数据：1113条记录、ETF价格数据：1113条记录、ETF自选数据：1096条记录、ETF持有人数据：1094条记录、ETF指数分类数据：429条记录、ETF商务协议数据：339条记录）


### v2.11.5(2025-03-26)
- 功能优化：Markdown输出新增指数简介

### v2.11.4(2025-03-26)
- 新增功能：增加指数简介展示

### v2.11.3(2025-03-26)
- 界面优化：网站的主要功能模块现在位于顶部导航栏中，增加了屏幕的水平展示空间，提升了用户体验和数据可视化效果

### v2.11.2(2025-03-26)
- 功能优化：Markdown输出格式优化

### v2.11.1(2025-03-21)
- 功能优化：Markdown输出格式优化

### v2.11.0(2025-03-21)
- 新增功能：在搜索页面添加了「导出Markdown」按钮和功能
- 修改bug：浮层信息匹配基金公司、跟踪指数、涨跌幅信息

### v2.10.3(2025-03-20)
- 修改bug：推荐模块展示最近交易日涨幅前20ETF，可点击展示同跟踪指数信息

### v2.10.2(2025-03-20)
- 新增功能：推荐模块展示最近交易日涨幅前20ETF，且同一跟踪指数只展示涨幅最大的那只

### v2.10.1(2025-03-19)
- 新增功能：新增akshare数据库接入
- 修改bug：tushare数据库接入问题

### v2.10.0(2025-03-19)
- 新增功能：新增tushare数据库接入

### v2.9.12(2025-03-18)
- 代码优化：减少代码冗余，实现代码模块化

### v2.9.11(2025-03-18)
- 功能优化：搜索结果优化，增加统计跟踪指数数量和ETF数量

### v2.9.10(2025-03-18)
- 新增功能：增加所有表格的汇总信息

### v2.9.9(2025-03-18)
- 关键修复：修复搜索指数名称、跟踪指数代码时，月日均交易量(亿元)数据错误

### v2.9.8(2025-03-18)
- 关键修复：修复推荐模块bug

### v2.9.7(2025-03-18)
- 功能优化：推荐模块UI升级

### v2.9.6(2025-03-18)
- 新增功能：增加搜索推荐模块，包括三个榜单：新增关注TOP20、新增持仓客户TOP20和新增保有金额TOP20

### v2.9.5(2025-03-16)
- 修改月日均交易量数据获取方式

### v2.9.4(2025-03-16)
- 功能优化：在所有表格中新增展示六项客户数据

### v2.9.3(2025-03-16)
- 展示优化：搜索框可根据不同的搜索条件，展示不同的内容

### v2.9.2(2025-03-15)
- 重构前端代码，实现模块化
- 优化HTML结构，使用模板继承
- 整合JavaScript代码，提高可维护性
- 修复搜索功能的问题

### v.2.9.1(2025-03-15)
- 修复因版本更新造成的错误

### v2.9.0（2025-03-15）
- 重构项目为模块化结构
- 使用Flask蓝图组织路由
- 优化搜索功能
- 改进数据加载机制

### v2.8.3（2025-03-14）
- 新增功能：支持搜索基金公司名称，得到所有基金信息

### v2.8.2（2025-03-14）
- 体验优化：竞品展示信息优化

### v2.8.1（2025-03-14）
- 体验优化：竞品展示信息优化

### v2.8.0（2025-03-14）
- 新增功能：上线网页查询并展示ETF同跟踪指数竞品功能
- 新增功能：查询能力提升：可搜索跟踪指数代码、指数简称，并展示跟踪ETF功能

### v2.7.5（2025-03-13）
- 新增功能：在运营周报中增加不同分级跟踪指数的数量和占比分析

### v2.7.4（2025-03-13）

- 体验优化：在跟踪指数分级评价表中，增加指数分级1-9级的逻辑说明和展示

### v2.7.3（2025-03-13）
- 体验优化：在运营周报中增加基金公司预估收入汇总信息

### v2.7.2（2025-03-13）
- 新增功能：在运营周报中增加基金公司预估收入list
- 修改bug：修复运营周报中基金公司预估收入管理费率计算逻辑

### v2.7.1（2025-03-12）
- 功能迭代：在运营周报中增加商务品分析
- 体验优化：可测算每家基金公司商务品的总预期收入
- 体验优化：增加页码，字体统一到微软雅黑

### v2.7.0（2025-03-10）
- 新增功能：增加商务品分析
- 新增功能：商务品分析工具增加加权平均管理费率统计
- 体验优化：按保有规模加权计算管理费率，更准确反映整体费率水平

### v2.6.0（2025-02-24）
- 新增功能：寻找并展示排名靠前的非商务品的替代品

### v2.5.0(2025-02-20)
- 新增功能：统计不同规模跟踪指数下跟踪指数各层级数量

### v2.4.0(2025-02-20)
- 新增功能：将跟踪指数进行分级，共分为九级

### v2.3.2(2025-02-20)
- 体验优化：增加“跟踪指数名称”列

### v2.3.1 (2025-02-19)
- 体验优化：简化基金公司显示名称

### v2.3.0 (2025-02-19)
- 新增功能：跟踪指数下是否有商务品，统计有几只，合计规模是多少

### v2.2.2 (2025-02-19)
- 体验优化：更新跟踪指数分类分析展示，修改行标签、按关注数排序、减少三级分类展示数量

### v2.2.1 (2025-02-19)
- 体验优化：更新跟踪指数分类分析展示模块，使得展示更加可读

### v2.2.0 (2025-02-19)
- 新增功能：新增跟踪指数周度分类分析功能

### v2.0.1 (2024-02-19)
- 新增功能：报告封面自动添加版本信息
- 体验优化：错误提示中显示可用列名清单
- 关键修复：日期格式处理逻辑优化（支持跨月/跨年计算）

### v2.0.0 (2025-02-14)
- 新增商务品分析功能
- 新增跟踪指数统计
- 优化数值格式化显示

### v1.0.0 (2025-01-01)
- 首次发布
- 基础报告生成功能

## 使用说明

### 跟踪指数分级
- 将跟踪指数分级分成九级，相互独立。分别是：
    一级：同时满足交易量最大、费率最低中交易量最大、规模最大三者都是商务品；
    二级：同时满足交易量最大、费率最低中交易量最大是商务品、规模最大不是商务品；
    三级：同时满足交易量最大、规模最大是商务品、费率最低中交易量最大不是商务品；
    四级：同时满足费率最低中交易量最大、规模最大是商务品、交易量最大不是商务品；
    五级：仅满足交易量最大是商务品；
    六级：仅满足规模最大是商务品；
    七级：仅满足费率最低中交易量最大是商务品；
    八级：仅是商务品；
    九级：没有商务品。

### 商务品分析工具
商务品分析工具(business_etf_analyzer.py)用于分析ETF商务品的各项指标和表现。

主要功能：
- 商务品基本情况统计（总数、规模、占比等）
- 按基金公司分析商务品（规模、数量、预期收入）
- 按指数类型和层级分析商务品
- 商务品业绩表现分析
- 商务品管理费率分析（含加权平均管理费率）
- 商务品客户参与度分析
- 自动生成商务品分析报告

使用方法：
```python
python business_etf_analyzer.py